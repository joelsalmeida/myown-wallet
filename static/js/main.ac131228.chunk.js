(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{30:function(e,t,n){e.exports=n(50)},35:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),i=n.n(c),l=n(19),o=(n(35),n(10));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(13),s=n(27),d=n(28),m=n(3),p="https://economia.awesomeapi.com.br/json/all",E={email:""};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(m.a)(Object(m.a)({},e),{},{email:t.email});default:return e}},b=n(29),f={currencies:[],expenses:[],editIsActive:!1,indexAndExchangeToEdit:null};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENCIES":return Object(m.a)(Object(m.a)({},e),{},{currencies:t.currencies});case"ADD_EXPENSE":return Object(m.a)(Object(m.a)({},e),{},{expenses:[].concat(Object(b.a)(e.expenses),[t.expense])});case"REMOVE_EXPENSE":return Object(m.a)(Object(m.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.expenseId}))});case"ENABLE_EXPENSE_EDITING":return Object(m.a)(Object(m.a)({},e),{},{editIsActive:!0,indexAndExchangeToEdit:t.expenseId});case"EDIT_EXPENSE":return Object(m.a)(Object(m.a)({},e),{},{expenses:e.expenses.map((function(n){var a=e.indexAndExchangeToEdit.id,r=e.indexAndExchangeToEdit.exchange,c=Object(m.a)(Object(m.a)({},t.newExpense),{},{exchangeRates:r});return n.id===a?c:n})),editIsActive:!1});default:return e}},x=Object(u.combineReducers)({user:h,wallet:v}),g=Object(u.createStore)(x,Object(s.composeWithDevTools)(Object(u.applyMiddleware)(d.a))),O=n(2),j=n(15),y=n(8),w=n(9),C=n(12),N=n(11),S=(n(42),function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).checkEmailAndPassword=function(){var e=a.state,t=e.email,n=e.password;a.setState({isEmailValid:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)}),a.setState({isPasswordValid:n.length>=6})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(j.a)({},n,r),(function(){return a.checkEmailAndPassword()}))},a.submit=function(){var e=a.props,t=e.login,n=e.history;t(a.state.email),n.push("/carteira")},a.state={email:"",password:"",isEmailValid:!1,isPasswordValid:!1},a}return Object(w.a)(n,[{key:"render",value:function(){var e=this.state,t=e.isEmailValid,n=e.isPasswordValid,a=!t||!n;return r.a.createElement("main",{className:"login"},r.a.createElement("form",{className:"login-form border-orange"},r.a.createElement("h1",null,"MyOwn Wallet"),r.a.createElement("label",{htmlFor:"input-email"},"Email:",r.a.createElement("input",{type:"email",name:"email",id:"input-email",onChange:this.handleChange,"data-testid":"email-input"})),r.a.createElement("label",{htmlFor:"input-password"},"Senha:",r.a.createElement("input",{type:"password",name:"password",id:"input-password",onChange:this.handleChange,"data-testid":"password-input"})),r.a.createElement("button",{type:"button",disabled:a,onClick:this.submit},"Entrar")))}}]),n}(r.a.Component)),k=Object(o.b)(null,(function(e){return{login:function(t){return e(function(e){return{type:"LOGIN",email:e}}(t))}}}))(S),I=(n(43),function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(y.a)(this,n),(e=t.call(this)).handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(j.a)({},a,r))},e.addExpense=function(){(0,e.props.addExpense)(e.state),e.setState((function(e){return{id:e.id+1,value:"",description:""}}))},e.state={id:0,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",exchangeRates:{}},e}return Object(w.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.setCurrencies)()}},{key:"render",value:function(){var e=this,t=this.props,n=t.currencies,a=t.editIsActive,c=t.edit,i=this.state,l=i.value,o=i.description,u=a?"Editar despesa":"Adicionar despesa";return r.a.createElement("form",{className:"expense-form"},r.a.createElement("div",{className:"expense"},r.a.createElement("label",{htmlFor:"value-input"},"Valor da despesa:",r.a.createElement("input",{type:"text",name:"value",id:"value-input",onChange:this.handleChange,value:l,"data-testid":"value-input"})),r.a.createElement("label",{htmlFor:"description-input"},"Descri\xe7\xe3o:",r.a.createElement("input",{type:"text",name:"description",id:"description-input",onChange:this.handleChange,value:o,"data-testid":"description-input"}))),r.a.createElement("div",{className:"details"},r.a.createElement("label",{htmlFor:"currency-input"},"Moeda:",r.a.createElement("select",{name:"currency",id:"currency-input",onChange:this.handleChange,"data-testid":"currency-input"},n.map((function(e,t){return r.a.createElement("option",{value:e,key:t,"data-testid":e},e)})))),r.a.createElement("label",{htmlFor:"method-input"},"M\xe9todo de pagamento:",r.a.createElement("select",{name:"method",id:"method-input",onChange:this.handleChange,"data-testid":"method-input"},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag-input"},"Tipo de despesa:",r.a.createElement("select",{name:"tag",id:"tag-input",onChange:this.handleChange,"data-testid":"tag-input"},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"),r.a.createElement("option",{value:"Transporte"},"Transporte"))),r.a.createElement("button",{type:"button",onClick:a?function(){return c(e.state)}:this.addExpense},u)))}}]),n}(a.Component));I.defaultProps={editIsActive:!1};var A=Object(o.b)((function(e){return{currencies:e.wallet.currencies,editIsActive:e.wallet.editIsActive,indexToEdit:e.wallet.indexToEdit}}),(function(e){return{setCurrencies:function(){return e((function(e){try{fetch(p).then((function(e){return e.json()})).then((function(t){return e({type:"SET_CURRENCIES",currencies:Object.keys(t).filter((function(e){return"USDT"!==e}))})}))}catch(t){console.error(t)}}))},addExpense:function(t){return e(function(e){return function(t){try{fetch(p).then((function(e){return e.json()})).then((function(n){return t(function(e){return{type:"ADD_EXPENSE",expense:e}}(Object(m.a)(Object(m.a)({},e),{},{exchangeRates:n})))}))}catch(n){console.error(n)}}}(t))},edit:function(t){return e(function(e){return{type:"EDIT_EXPENSE",newExpense:e}}(t))}}}))(I),T=(n(44),function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.expenses,n=e.delExpense,a=e.enableEdit,c=function(e){return Number(e).toFixed(2)};return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,t.map((function(e){var i=e.currency,l=e.value,o=e.id,u=e.exchangeRates[i].ask*l,s=e.exchangeRates[i].name,d=e.exchangeRates[i].ask;return r.a.createElement("tr",{key:o},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,e.value),r.a.createElement("td",null,s),r.a.createElement("td",null,c(d)),r.a.createElement("td",null,c(u)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"edit-btn",name:o,onClick:function(){return a(function(e){var n=t.find((function(t){return t.id===e}));return{id:t.indexOf(n),exchange:n.exchangeRates}}(o))},className:"table-button"},"Editar"),r.a.createElement("button",{type:"button",onClick:function(){return n(o)},"data-testid":"delete-btn",className:"table-button"},"Delete")))}))))}}]),n}(a.Component)),D=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{delExpense:function(t){return e(function(e){return{type:"REMOVE_EXPENSE",expenseId:e}}(t))},enableEdit:function(t){return e(function(e){return{type:"ENABLE_EXPENSE_EDITING",expenseId:e}}(t))}}}))(T),R=(n(45),function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.expenses.map((function(e){var t=e.currency,n=e.value,a=e.exchangeRates[t].ask*n;return Number(a)})).reduce((function(e,t){return e+t}),0);return r.a.createElement("header",null,r.a.createElement("h1",null,"MyOwn Wallet"),r.a.createElement("div",{className:"header-expense"},r.a.createElement("span",{"data-testid":"email-field",className:"email"},t),r.a.createElement("span",{"data-testid":"total-field",className:"total"},n.toFixed(2)),r.a.createElement("span",{"data-testid":"header-currency-field",className:"currency"},"BRL")))}}]),n}(r.a.Component)),P=Object(o.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(R),M=(n(46),function(e){Object(C.a)(n,e);var t=Object(N.a)(n);function n(){return Object(y.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("div",{className:"wallet border-orange"},r.a.createElement(P,null),r.a.createElement(A,null),r.a.createElement(D,null)))}}]),n}(r.a.Component));var _=function(){return r.a.createElement(O.c,null,r.a.createElement(O.a,{exact:!0,path:"/",component:k}),r.a.createElement(O.a,{exact:!0,path:"/carteira",component:M}))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:g},r.a.createElement(l.a,null,r.a.createElement(_,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.ac131228.chunk.js.map